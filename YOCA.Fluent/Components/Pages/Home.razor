@page "/"

@inject DayOfCodeDataAccess dayData
@rendermode InteractiveServer

<PageTitle>Year of Code</PageTitle>
<br />
@if (tm != null) {
<FluentCard Height="auto">
    <b>Tomorrow:</b> Day @tm.Day - @tm.Date.ToString("MMMM d, yyyy") - @tm.Tomorrow
</FluentCard>
<br />
}

<FluentCard Height="auto">
    This is a work in progress project. You can find the source code at:
    <a href="https://www.github.com/webluke/YOCA" trget="_blank">GitHub/WebLuke/YOCA</a>
</FluentCard>
<br />
@if (days != null)
{
    foreach (var day in days)
    {
        <DayView day="@day" />
        <br />
    }

}

@code {
    private IEnumerable<DayOfCodeModel>? days { get; set; }
    private TomorrowModel tm { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await RefreshData();
    }

    private async Task RefreshData()
    {
        days = await dayData.GetDays();
        tm = await dayData.GetTomorrow();
    }
}